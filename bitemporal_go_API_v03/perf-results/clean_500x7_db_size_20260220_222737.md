# Database grootte na tests

## Snapshot (actueel)
- Database: `bitemp_go_db`
- Totale grootte: `15 MB` (`16021183 bytes`)

### Grootste tabellen (met exacte rows voor top-tabellen)

| tabel | exact_rows | total_size |
|---|---:|---:|
| wijziging | 28400 | 2808 kB |
| registratie | 7100 | 1432 kB |
| a_v | 14200 | 1376 kB |
| a | 7100 | 864 kB |
| a_u | 7100 | 792 kB |
| tests | 0 | 16 kB |
| b_y | 0 | 16 kB |
| b_x | 0 | 16 kB |
| tasks | 0 | 16 kB |
| rel_a_b | 0 | 8192 bytes |
| b | 0 | 8192 bytes |

## Instructie: zelf opnieuw opvragen

### 1) Totale databasegrootte

`powershell
docker exec sweet_agnesi psql -U postgres -d bitemp_go_db -c "SELECT current_database() AS db, pg_size_pretty(pg_database_size(current_database())) AS db_size, pg_database_size(current_database()) AS db_size_bytes;"
`"
        "
        

`powershell
docker exec sweet_agnesi psql -U postgres -d bitemp_go_db -c "WITH sizes AS (SELECT c.relname AS table_name, pg_total_relation_size(c.oid) AS total_size_bytes, pg_size_pretty(pg_total_relation_size(c.oid)) AS total_size FROM pg_class c JOIN pg_namespace n ON n.oid = c.relnamespace WHERE c.relkind='r' AND n.nspname='public') SELECT s.table_name, COALESCE(cnt.exact_rows, 0) AS exact_rows, s.total_size, s.total_size_bytes FROM sizes s LEFT JOIN (SELECT 'wijziging'::text AS table_name, COUNT(*)::bigint AS exact_rows FROM wijziging UNION ALL SELECT 'a_v', COUNT(*) FROM a_v UNION ALL SELECT 'a_u', COUNT(*) FROM a_u UNION ALL SELECT 'registratie', COUNT(*) FROM registratie UNION ALL SELECT 'a', COUNT(*) FROM a) cnt ON cnt.table_name = s.table_name ORDER BY s.total_size_bytes DESC;"
`"
        "
        

Groei zit vooral in `wijziging`, `a_v`, `a_u`, `registratie` en `a`, wat past bij registratie/performance-runs.
